<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui">
    <ui:composition template="../layout_operacoes.xhtml">
        <ui:define name="content">
            <h1>Lançar Venda</h1>
            <b:form>
                <b:inputText id="numero" value="#{jsfVenda.numero}" label="Numero:" required="true" col-md="2" type="number"/>
                <b:datepicker  id="emissao" value="#{jsfVenda.emissao}" col-md="2" required="true" changeMonth="true" changeYear="true" showButtonPanel="true" label="Emissão:"/>
                <b:inputText id="cliente" value="#{jsfVenda.clienteId}" col-md="8" required="true" label="Cliente:"/>
                <b:inputText id="desconto" value="#{jsfVenda.desconto}" type="number" label="Desconto:" readonly="true" col-md="2"/>  
                <b:inputText id="total" value="#{jsfVenda.total}" type="number" col-md="2" label="Total:" readonly="true"/>
                <b:inputText id="produto" value="#{jsfVenda.produto}"  col-md="2" label="Produto:" />  

                <b:dataTable id="tabelaProdutos" value="#{jsfItensVenda.itens}" var="item">
                    <b:dataTableColumn value="#{item.protudoId.codigo}"></b:dataTableColumn>
                    <b:dataTableColumn value="#{item.produtoId.descricao}"></b:dataTableColumn>
                    <b:dataTableColumn value="#{item.produtoId.quantidade}"></b:dataTableColumn>
                    <b:dataTableColumn value="#{item.produtoId.valorUnitario}"></b:dataTableColumn>
                    <b:dataTableColumn value="#{item.produtoId.desconto}"></b:dataTableColumn>
                    <b:dataTableColumn>
                        <b:commandButton value="Ações" icon-awesome="trash" action="#{jsfItensVenda.remove(item)}"></b:commandButton>
                    </b:dataTableColumn>
                </b:dataTable>
                <b:commandButton value="Fechar Venda" icon-awesome="save" action="#{jsfVenda.fechaVenda}"></b:commandButton>
            </b:form>
            <p:messages id="messages" showDetail="true" closable="true">
                <p:autoUpdate />
            </p:messages>
        </ui:define>
    </ui:composition>

</html>

